# Health Check Configuration for Cross-Architecture Deployment
# This file contains configuration for the health checking and monitoring system

# Endpoint Configuration
PRIMARY_ENDPOINT="/api/healthchecker"
FALLBACK_ENDPOINT="/health"

# Timeout Configuration (seconds)
HEALTH_TIMEOUT=10

# Retry Configuration
HEALTH_RETRIES=3
ROLLBACK_THRESHOLD=3

# Exponential Backoff Configuration
BASE_DELAY=5        # Initial delay in seconds
MAX_DELAY=80        # Maximum delay in seconds
MULTIPLIER=2        # Exponential multiplier

# Logging Configuration
LOG_LEVEL="INFO"    # DEBUG, INFO, WARN, ERROR
MAX_LOG_LINES=1000  # Maximum lines to keep in log file

# Container Configuration
DEFAULT_CONTAINER_NAME="rustci"
CONTAINER_HEALTH_CHECK_INTERVAL=30

# Network Configuration
CONNECTION_TIMEOUT=5
MAX_REDIRECTS=3

# Monitoring Configuration
CONTINUOUS_MONITOR_INTERVAL=30  # seconds between checks in continuous mode
ALERT_THRESHOLD=5               # consecutive failures before alerting

# Production vs Testing Mode
# Set to true for testing with relaxed thresholds
TESTING_MODE=true

# Testing mode overrides (only used when TESTING_MODE=true)
if [[ "$TESTING_MODE" == "true" ]]; then
    HEALTH_TIMEOUT=15
    HEALTH_RETRIES=5
    ROLLBACK_THRESHOLD=5
    echo "WARNING: Health checker running in testing mode with relaxed thresholds"
fi